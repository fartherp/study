<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>系统日期函数</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="2bkv" id="系统日期函数">系统日期函数</h1><div class="md-section-divider"></div><h2 data-anchor-id="vurz" id="当前日期时间date-time">当前日期+时间(date + time)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="m3tv"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> now</span><span class="pun">();</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> sysdate</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="886t" id="now与sysdate比较">now()与sysdate()比较</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="q76q"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> now</span><span class="pun">(),</span><span class="pln"> sleep</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln"> now</span><span class="pun">();</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> sysdate</span><span class="pun">(),</span><span class="pln"> sleep</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln"> sysdate</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="erp5" id="当前日期date">当前日期(date)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="m5ia"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> curdate</span><span class="pun">();</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> CURRENT_DATE</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="m6az" id="当前时间time">当前时间（time）</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="v9af"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> curtime</span><span class="pun">();</span></code></li><li class="L1"><code><span class="pln">SELECT CURRENT_TIME</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="qgka" id="当前时间戳">当前时间戳</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="z2yi"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> current_timestamp</span><span class="pun">,</span><span class="pln"> current_timestamp</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="l4gq" id="当前-utc-日期时间">当前 UTC 日期时间</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="va51"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> utc_timestamp</span><span class="pun">(),</span><span class="pln"> utc_date</span><span class="pun">(),</span><span class="pln"> utc_time</span><span class="pun">(),</span><span class="pln"> now</span><span class="pun">();</span></code></li><li class="L1"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">因为我国位于东八时区，所以本地时间</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> UTC </span><span class="pun">时间</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="pun">小时。</span><span class="pln">UTC </span><span class="pun">时间在业务涉及多个国家和地区的时候，非常有用。</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="49mf" id="extract">Extract()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="d6yk"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">year </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">年</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">quarter </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">当前季度</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">month </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">月</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">week </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">年的周数</span></code></li><li class="L4"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">day </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">月的天数</span></code></li><li class="L5"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">hour </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时</span></code></li><li class="L6"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">minute </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">分钟</span></code></li><li class="L7"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">second </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L8"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">microsecond </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">微秒（</span><span class="lit">6</span><span class="pun">位）</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">year_month </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">年月</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">day_hour </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">天数小时</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">day_minute </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">天数分钟</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">day_second </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">天数秒</span></code></li><li class="L4"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">day_microsecond </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">天数微秒（</span><span class="lit">6</span><span class="pun">位）</span></code></li><li class="L5"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">hour_minute </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时分钟</span></code></li><li class="L6"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">hour_second </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时秒</span></code></li><li class="L7"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">hour_microsecond </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时微秒</span></code></li><li class="L8"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">minute_second </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">分钟秒</span></code></li><li class="L9"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">minute_microsecond </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">分钟微秒</span></code></li><li class="L0"><code><span class="kwd">select</span><span class="pln"> extract</span><span class="pun">(</span><span class="pln">second_microsecond </span><span class="kwd">from</span><span class="pln"> now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">秒微秒</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="0v9d" id="dayofweek-dayofmonth-dayofyear">dayofweek(), dayofmonth(), dayofyear()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="f8vv"><ol class="linenums"><li class="L0"><code><span class="pln">SELECT </span><span class="pun">(</span><span class="pln">DAYOFWEEK</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">())</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> AS days</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">每周第几天</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> dayofmonth</span><span class="pun">(</span><span class="pln">now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">每月第几天</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> dayofyear</span><span class="pun">(</span><span class="pln">now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">每年第几天</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="y5oe" id="week-weekofyear-dayofweek-weekday-yearweek">week(), weekofyear(), dayofweek(), weekday(), yearweek()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="nvh9"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> week</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> week</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="lit">3</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> weekofyear</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">每年第几周</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> weekday</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">4</span></code></li><li class="L4"><code><span class="kwd">select</span><span class="pln"> yearweek</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">200831</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="r356" id="lastday">last_day()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="8rk5"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> last_day</span><span class="pun">(</span><span class="pln">now</span><span class="pun">());</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">月份中的最后一天</span></code></li></ol></pre></div>
</body>
</html>