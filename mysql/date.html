<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>日期处理函数</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="r699" id="日期处理函数">日期处理函数</h1><div class="md-section-divider"></div><h2 data-anchor-id="gkbw" id="日期增加一个时间间隔-dateadd">日期增加一个时间间隔: date_add()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="cy4x"><ol class="linenums"><li class="L0"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> DAY</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">日</span></code></li><li class="L1"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> HOUR</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时</span></code></li><li class="L2"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MINUTE</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">分钟</span></code></li><li class="L3"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> SECOND</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L4"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MICROSECOND</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">微秒(</span><span class="lit">6</span><span class="pun">位)</span></code></li><li class="L5"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> WEEK</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">周</span></code></li><li class="L6"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MONTH</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">月</span></code></li><li class="L7"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> QUARTER</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">季度</span></code></li><li class="L8"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_ADD</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> YEAR</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">年</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ylyb" id="日期相减一个时间间隔-datesub">日期相减一个时间间隔: date_sub()</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="890h"><ol class="linenums"><li class="L0"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> DAY</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">日</span></code></li><li class="L1"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> HOUR</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">小时</span></code></li><li class="L2"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MINUTE</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">分钟</span></code></li><li class="L3"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> SECOND</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L4"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MICROSECOND</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">微秒(</span><span class="lit">6</span><span class="pun">位)</span></code></li><li class="L5"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> WEEK</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">周</span></code></li><li class="L6"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> MONTH</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">月</span></code></li><li class="L7"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> QUARTER</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">季度</span></code></li><li class="L8"><code><span class="pln">SELECT NOW</span><span class="pun">(),</span><span class="pln"> DATE_SUB</span><span class="pun">(</span><span class="pln">NOW</span><span class="pun">(),</span><span class="pln"> INTERVAL </span><span class="lit">1</span><span class="pln"> YEAR</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">年</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="xkw3" id="日期时间相减-datediffdate1date2-timedifftime1time2">日期、时间相减: datediff(date1,date2), timediff(time1,time2)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dgsv"><ol class="linenums"><li class="L0"><code><span class="pln">SELECT DATEDIFF</span><span class="pun">(</span><span class="str">'2008-08-08'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2008-08-01'</span><span class="pun">)</span><span class="pln"> AS days</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">7</span></code></li><li class="L1"><code><span class="pln">SELECT DATEDIFF</span><span class="pun">(</span><span class="str">'2008-08-01'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2008-08-08'</span><span class="pun">)</span><span class="pln"> AS days</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">-</span><span class="lit">7</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> timediff</span><span class="pun">(</span><span class="str">'2008-08-08 08:08:08'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'2008-08-08 00:00:00'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">08</span><span class="pun">:</span><span class="lit">08</span><span class="pun">:</span><span class="lit">08</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> timediff</span><span class="pun">(</span><span class="str">'08:08:08'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'00:00:00'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">08</span><span class="pun">:</span><span class="lit">08</span><span class="pun">:</span><span class="lit">08</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="mvnw" id="时间秒转换-timetosectime-sectotimeseconds">时间、秒转换: time_to_sec(time), sec_to_time(seconds)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="a7s3"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> time_to_sec</span><span class="pun">(</span><span class="str">'01:00:05'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">3605</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> sec_to_time</span><span class="pun">(</span><span class="lit">3605</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'01:00:05'</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ti5x" id="日期天数转换-todaysdate-fromdaysdays">日期、天数转换: to_days(date), from_days(days)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="stj1"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> to_days</span><span class="pun">(</span><span class="str">'0000-00-00'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> to_days</span><span class="pun">(</span><span class="str">'2008-08-08'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">733627</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> from_days</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'0000-00-00'</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> from_days</span><span class="pun">(</span><span class="lit">733627</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'2008-08-08'</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="4gbt" id="字符串转换为日期-strtodatestr-format">字符串转换为日期: str_to_date(str, format)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="brqe"><ol class="linenums"><li class="L0"><code><span class="pln">SELECT STR_TO_DATE</span><span class="pun">(</span><span class="str">'2008-12-31'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%Y-%m-%d'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">2008</span><span class="pun">-</span><span class="lit">12</span><span class="pun">-</span><span class="lit">31</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> str_to_date</span><span class="pun">(</span><span class="str">'69-12-31'</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="str">'%y-%m-%d'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">2069</span><span class="pun">-</span><span class="lit">12</span><span class="pun">-</span><span class="lit">31</span><span class="pln"> y</span><span class="pun">的阀值</span><span class="lit">70</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> str_to_date</span><span class="pun">(</span><span class="str">'2008.12.31'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%Y.%m.%d'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">2008</span><span class="pun">-</span><span class="lit">12</span><span class="pun">-</span><span class="lit">31</span></code></li><li class="L3"><code><span class="kwd">select</span><span class="pln"> str_to_date</span><span class="pun">(</span><span class="str">'20:09:30'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%H:%i:%s'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">20</span><span class="pun">:</span><span class="lit">09</span><span class="pun">:</span><span class="lit">30</span><span class="pln"> H</span><span class="pun">:</span><span class="pln"> </span><span class="lit">24</span><span class="pun">小时制</span><span class="pln"> h</span><span class="pun">:</span><span class="pln"> </span><span class="lit">12</span><span class="pun">小时制</span></code></li><li class="L4"><code><span class="kwd">select</span><span class="pln"> str_to_date</span><span class="pun">(</span><span class="str">'08.09.2008 08:09:30'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%m.%d.%Y %h:%i:%s'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">2008</span><span class="pun">-</span><span class="lit">08</span><span class="pun">-</span><span class="lit">09</span><span class="pln"> </span><span class="lit">08</span><span class="pun">:</span><span class="lit">09</span><span class="pun">:</span><span class="lit">30</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="zl17" id="日期时间转换为字符串-dateformatdateformat-timeformattimeformat">日期/时间转换为字符串: date_format(date,format), time_format(time,format)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="8s7d"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> date_format</span><span class="pun">(</span><span class="str">'2008-08-08 22:23:00'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%W %M %Y'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="typ">Friday</span><span class="pln"> </span><span class="typ">August</span><span class="pln"> </span><span class="lit">2008</span></code></li><li class="L1"><code><span class="pln">SELECT DATE_FORMAT</span><span class="pun">(</span><span class="str">'2008-12-31 22:23:00'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%Y-%m-%d %H:%i:%s'</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">2008</span><span class="pun">-</span><span class="lit">12</span><span class="pun">-</span><span class="lit">31</span><span class="pln"> </span><span class="lit">22</span><span class="pun">:</span><span class="lit">23</span><span class="pun">:</span><span class="lit">00</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="39s6" id="拼凑日期时间-makdedateyeardayofyear-maketimehourminutesecond">拼凑日期、时间: makdedate(year,dayofyear), maketime(hour,minute,second)</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="mesu"><ol class="linenums"><li class="L0"><code><span class="kwd">select</span><span class="pln"> makedate</span><span class="pun">(</span><span class="lit">2001</span><span class="pun">,</span><span class="lit">31</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'2001-01-31'</span></code></li><li class="L1"><code><span class="kwd">select</span><span class="pln"> makedate</span><span class="pun">(</span><span class="lit">2001</span><span class="pun">,</span><span class="lit">32</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'2001-02-01'</span></code></li><li class="L2"><code><span class="kwd">select</span><span class="pln"> maketime</span><span class="pun">(</span><span class="lit">12</span><span class="pun">,</span><span class="lit">15</span><span class="pun">,</span><span class="lit">30</span><span class="pun">);</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="str">'12:15:30'</span></code></li></ol></pre></div>
</body>
</html>