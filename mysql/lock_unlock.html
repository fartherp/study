<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>mysql锁表/解锁</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="snkh" id="mysql锁表解锁">mysql锁表/解锁</h1><hr><div class="md-section-divider"></div><h2 data-anchor-id="c1dh" id="锁表情况">锁表情况</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="iepr"><ol class="linenums"><li class="L0"><code><span class="pln">show status like </span><span class="str">'table%'</span><span class="pun">;</span></code></li><li class="L1"><code><span class="typ">Table_locks_immediate</span><span class="pln">  </span><span class="pun">指的是能够立即获得表级锁的次数</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="typ">Table_locks_waited</span><span class="pln">  </span><span class="pun">指的是不能立即获取表级锁而需要等待的次数</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="zvnh" id="查看正在被锁定的的表">查看正在被锁定的的表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4iuf"><ol class="linenums"><li class="L0"><code><span class="pln">show OPEN TABLES </span><span class="kwd">where</span><span class="pln"> </span><span class="typ">In_use</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="c2ag" id="行锁争用情况">行锁争用情况</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="j4aq"><ol class="linenums"><li class="L0"><code><span class="pln">show status like </span><span class="str">'innodb_row_lock%'</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pun">发现锁争用比较严重，如</span><span class="typ">InnoDB_row_lock_waits</span><span class="pun">和</span><span class="typ">InnoDB_row_lock_time_avg</span><span class="pun">的值比较高</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="n6st" id="解锁">解锁</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="pecm"><ol class="linenums"><li class="L0"><code><span class="pln">show processlist</span><span class="pun">;</span></code></li></ol></pre></div>
</body>
</html>