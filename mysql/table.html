<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>创建与修改表</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="9sjr" id="创建与修改表">创建与修改表</h1><div class="md-section-divider"></div><h2 data-anchor-id="9i8v" id="创建新表">创建新表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6jxp"><ol class="linenums"><li class="L0"><code><span class="pln">CREATE TABLE </span><span class="str">`td_dic`</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L1"><code><span class="pln">  </span><span class="str">`id`</span><span class="pln"> INT</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL AUTO_INCREMENT COMMENT </span><span class="str">'主键标识'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">  </span><span class="str">`dic_id`</span><span class="pln"> INT</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典ID'</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">  </span><span class="str">`dic_name`</span><span class="pln"> VARCHAR</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典名称'</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">  </span><span class="str">`dic_desc`</span><span class="pln"> VARCHAR</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典描述'</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">  </span><span class="str">`dic_type`</span><span class="pln"> INT</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典类型'</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">  PRIMARY KEY </span><span class="pun">(</span><span class="str">`id`</span><span class="pun">),</span></code></li><li class="L7"><code><span class="pln">  UNIQUE KEY </span><span class="str">`idx_dic_type`</span><span class="pln"> </span><span class="pun">(</span><span class="str">`dic_type`</span><span class="pun">),</span></code></li><li class="L8"><code><span class="pln">  KEY </span><span class="str">`idx_dic_id`</span><span class="pln"> </span><span class="pun">(</span><span class="str">`dic_id`</span><span class="pun">)</span></code></li><li class="L9"><code><span class="pun">)</span><span class="pln"> ENGINE</span><span class="pun">=</span><span class="pln">INNODB DEFAULT CHARSET</span><span class="pun">=</span><span class="pln">utf8 COMMENT</span><span class="pun">=</span><span class="str">'字典表'</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="phc6" id="分区表">分区表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="r2r9"><ol class="linenums"><li class="L0"><code><span class="pln">CREATE TABLE </span><span class="str">`device_gps_infos`</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L1"><code><span class="pln">  </span><span class="str">`id`</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL AUTO_INCREMENT COMMENT </span><span class="str">'设备ID'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">  </span><span class="str">`device_id`</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'设备ID'</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">  </span><span class="str">`msg_id`</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'终端带的消息ID'</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">  </span><span class="str">`event_time`</span><span class="pln"> datetime NOT NULL DEFAULT </span><span class="str">'1970-01-01 00:00:00'</span><span class="pln"> COMMENT </span><span class="str">'数据采集时间'</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">  </span><span class="str">`longitude`</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'经度'</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">  </span><span class="str">`latitude`</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'纬度'</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">  </span><span class="str">`speed`</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'车速'</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">  </span><span class="str">`msg_type`</span><span class="pln"> tinyint</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'告警类型,表:msg_type'</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">  </span><span class="str">`flash_state`</span><span class="pln"> tinyint</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'设备flash状态'</span><span class="pun">,</span></code></li><li class="L0"><code><span class="pln">  </span><span class="str">`upload_time`</span><span class="pln"> datetime DEFAULT NULL COMMENT </span><span class="str">'上传时间'</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">  </span><span class="str">`acceleration`</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> DEFAULT </span><span class="str">'0'</span><span class="pln"> COMMENT </span><span class="str">'加速度'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">  PRIMARY KEY </span><span class="pun">(</span><span class="str">`id`</span><span class="pun">,</span><span class="str">`event_time`</span><span class="pun">),</span></code></li><li class="L3"><code><span class="pln">  KEY </span><span class="str">`event_time_id`</span><span class="pln"> </span><span class="pun">(</span><span class="str">`event_time`</span><span class="pun">,</span><span class="str">`device_id`</span><span class="pun">)</span></code></li><li class="L4"><code><span class="pun">)</span><span class="pln"> ENGINE</span><span class="pun">=</span><span class="pln">INNODB DEFAULT CHARSET</span><span class="pun">=</span><span class="pln">utf8 COMMENT</span><span class="pun">=</span><span class="str">'客户原始数据表'</span></code></li><li class="L5"><code><span class="pln">PARTITION BY RANGE </span><span class="pun">(</span><span class="pln">TO_DAYS</span><span class="pun">(</span><span class="pln">event_time</span><span class="pun">))</span></code></li><li class="L6"><code><span class="pun">(</span><span class="pln">PARTITION p20151001 VALUES LESS THAN </span><span class="pun">(</span><span class="pln">TO_DAYS</span><span class="pun">(</span><span class="str">'20151001'</span><span class="pun">)),</span></code></li><li class="L7"><code><span class="pln"> PARTITION p20151101 VALUES LESS THAN </span><span class="pun">(</span><span class="pln">TO_DAYS</span><span class="pun">(</span><span class="str">'20151101'</span><span class="pun">)))</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="44vn" id="无主键表">无主键表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6tb3"><ol class="linenums"><li class="L0"><code><span class="pln">CREATE TABLE </span><span class="str">`td_dic_pk`</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L1"><code><span class="pln">  </span><span class="str">`dic_id`</span><span class="pln"> INT</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典ID'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">  </span><span class="str">`dic_name`</span><span class="pln"> VARCHAR</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'字典名称'</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">  </span><span class="str">`dic_desc`</span><span class="pln"> VARCHAR</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln"> DEFAULT NULL COMMENT </span><span class="str">'字典描述'</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">  </span><span class="str">`dic_type`</span><span class="pln"> INT</span><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span><span class="pln"> NOT NULL COMMENT </span><span class="str">'1-投放端类型2-审批状态'</span></code></li><li class="L5"><code><span class="pun">)</span><span class="pln"> ENGINE</span><span class="pun">=</span><span class="pln">INNODB DEFAULT CHARSET</span><span class="pun">=</span><span class="pln">utf8 COMMENT</span><span class="pun">=</span><span class="str">'字典表'</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="hzed" id="删除已存在的表">删除已存在的表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="bee6"><ol class="linenums"><li class="L0"><code><span class="pln">DROP TABLE IF EXISTS </span><span class="str">`td_dic`</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="oews" id="修改表引擎">修改表引擎</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="gqeu"><ol class="linenums"><li class="L0"><code><span class="pln">ALTER TABLE td_dic ENGINE</span><span class="pun">=</span><span class="typ">MyISAM</span><span class="pln"> DEFAULT CHARSET</span><span class="pun">=</span><span class="pln">utf8 COMMENT</span><span class="pun">=</span><span class="str">'字典表'</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="5qoq" id="重命名表">重命名表</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="12wn"><ol class="linenums"><li class="L0"><code><span class="pln">ALTER TABLE </span><span class="str">`td_dic_pk`</span><span class="pln"> RENAME </span><span class="str">`td_dic_rename`</span><span class="pun">;</span></code></li></ol></pre></div>
</body>
</html>