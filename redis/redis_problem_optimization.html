<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>redis性能问题分析和优化</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="41on" id="redis性能问题分析和优化">redis性能问题分析和优化</h1><hr><div class="md-section-divider"></div><h2 data-anchor-id="8npt" id="内存">内存</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="tuxb"><ol class="linenums"><li class="L0"><code><span class="pln">info memory</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">used_memory</span><span class="pun">是</span><span class="typ">Redis</span><span class="pun">使用的内存总量，包含了实际缓存占用的内存和</span><span class="typ">Redis</span><span class="pun">自身运行所占用的内存(如元数据、</span><span class="pln">lua</span><span class="pun">)，是由</span><span class="typ">Redis</span><span class="pun">使用内存分配器分配的内存，所以这个数据不包括内存碎片浪费掉的内存，其他字段代表的含义，都以字节为单位。</span></code></li><li class="L3"><code><span class="pln">used_memory_rss</span><span class="pun">：从操作系统上显示已经分配的内存总量。</span></code></li><li class="L4"><code><span class="pln">mem_fragmentation_ratio</span><span class="pun">：</span><span class="pln"> </span><span class="pun">内存碎片率。</span></code></li><li class="L5"><code><span class="pln">used_memory_lua</span><span class="pun">：</span><span class="pln"> </span><span class="typ">Lua</span><span class="pun">脚本引擎所使用的内存大小。</span></code></li><li class="L6"><code><span class="pln">mem_allocator</span><span class="pun">：</span><span class="pln"> </span><span class="pun">在编译时指定的</span><span class="typ">Redis</span><span class="pun">使用的内存分配器，可以是</span><span class="pln">libc</span><span class="pun">、</span><span class="pln">jemalloc</span><span class="pun">、</span><span class="pln">tcmalloc</span><span class="pun">。</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="t9by" id="延迟时间">延迟时间</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hbxh"><ol class="linenums"><li class="L0"><code><span class="pun">使用</span><span class="pln">slowlog</span><span class="pun">查出引发延迟的慢命令</span><span class="pln"> slowlog </span><span class="kwd">get</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="lit">1</span><span class="pun">、日志的唯一标识符</span></code></li><li class="L3"><code><span class="lit">2</span><span class="pun">、被记录命令的执行时间点，以</span><span class="pln"> UNIX </span><span class="pun">时间戳格式表示</span></code></li><li class="L4"><code><span class="lit">3</span><span class="pun">、查询执行时间，以微秒为单位</span></code></li><li class="L5"><code><span class="lit">4</span><span class="pun">、执行的命令，以数组的形式排列。完整命令是</span><span class="pln">config </span><span class="kwd">get</span><span class="pln"> </span><span class="pun">*</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="yrt9" id="命令处理数">命令处理数</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h5dx"><ol class="linenums"><li class="L0"><code><span class="pln">info stats</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ss5z" id="持久模式">持久模式</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="5v06"><ol class="linenums"><li class="L0"><code><span class="pln">info persistence</span></code></li></ol></pre></div>
</body>
</html>